<nav class="navbar is-fixed-top is-spaced">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img src="/images/logo_text.webp" width="122" alt="Musicbee logo">
      </a>

      <% if (authenticated) { %>
        <a class="navbar-end navbar-item is-hidden-desktop" href="/logout">
          <button class="button">Log Out</button>
        </a>
      <% } %>
    </div>

    <div id="navbar-menu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item has-text-weight-bold <%= /home_/.test(path) ? 'is-active' : '' %>" href="/">
          Home
        </a>
        <a class="navbar-item has-text-weight-bold <%= path === 'explore' ? 'is-active' : '' %>" href="/explore">
          Explore
        </a>
      </div>

      <div class="navbar-item is-expanded">
        <div id="search-control" class="control has-icons-left">
          <input id="search-input" class="input" type="search" placeholder="Search">
          <span class="icon is-small is-left">
            <span class="iconify" data-icon="ion:ios-search" data-height="24"></span>
          </span>
          <div id="search-suggestion" class="panel is-hidden"></div>
        </div>
      </div>

      <div class="navbar-end">
        <% if (authenticated) { %>
          <a class="navbar-item has-text-weight-bold <%= /create_/.test(path) ? "is-active" : '' %>" href="/create">
            Create
          </a>

          <div class="dropdown is-right">
            <div class="dropdown-trigger">
              <a aria-haspopup="true" aria-controls="user-control">
                <figure class="image is-48x48">
                  <img class="is-rounded" src="<%= userImgSrc %>"  alt="User profile image">
                </figure>
              </a>
            </div>
            <div class="dropdown-menu" id="user-control" role="menu">
              <div class="dropdown-content">
                <a id="my-account" href="/<%= username %>" class="dropdown-item" data-user="<%= username %>">My Account</a>
                <a href="/logout" class="dropdown-item">Log Out</a>
              </div>
            </div>
          </div>
        <% } else { %>
          <div class="navbar-item">
            <div class="buttons">
              <a class="login-button button" href="/login">
                <span>Sign in with</span>
                <span class="icon iconify" data-icon="flat-color-icons:google"></span>
              </a>
            </div>
          </div>
        <% } %>
      </div>
    </div>
  </div>
</nav>

<nav class="navbar is-fixed-bottom is-hidden-desktop">
  <div class="navbar-brand">
    <div class="columns is-mobile is-gapless has-text-centered">
      <div class="column">
        <a <%= /home_/.test(path) ? "class=is-active" : ' ' %> href="/">
          <span class="icon is-large">
            <span class="iconify" data-icon="ant-design:home<%= /home_/.test(path) ? '' : '-outline' %>"></span>
          </span>
        </a>
      </div>
      <div class="column">
        <a <%= path === 'explore' ? "class=is-active" : '' %> href="/explore">
          <span class="icon is-large">
            <span class="iconify" data-icon="<%= path === 'explore' ? 'fa-solid:search' : 'ion:ios-search' %>"></span>
          </span>
        </a>
      </div>
      <div class="column">
        <a <%= /create_/.test(path) ? "class=is-active" : '' %> href="/create">
          <span class="icon is-large">
            <span class="iconify"
                  data-icon="<%= /create_/.test(path) ? 'entypo:squared-plus' : 'fa-regular:plus-square' %>">
            </span>
          </span>
        </a>
      </div>
      <div class="column">
        <a id="navbar-user" <%= /user_/.test(path) ? "class=is-active" : '' %> href="<%= authenticated ? `/${username}` : '/login' %>">
          <span class="icon is-large">
            <span class="iconify" data-icon="fa-<%= /user_/.test(path) ? 'solid' : 'regular' %>:user"></span>
          </span>
        </a>
      </div>
    </div>
  </div>
</nav>
